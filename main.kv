ScreenManagement:
    MainScreen:
    WordScreen:
    SongReferences:
    DiaryScreen:
    HistoryScreen:
    ResultScreen:
    SettingScreen:
    BuatPINScreen:
    GantiPINScreen:
    HapusPINScreen:
    VerifyDiary:
    VerifyHistory:
    LupaPin:

<MainScreen>:
    name: 'main'
    MDToolbar:
        id: toolbar
        title: 'Wordiary'
        pos_hint: {"top":1}
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:0
        md_bg_color: (0,0,0,0)
    NavigationLayout:
        x: toolbar.height
        ScreenManager:
            id: sm
            Screen:
                MDLabel:
                    text: 'Manakah yang menggambarkan\nkondisimu saat ini?'
                    theme_text_color: 'Primary'
                    font_name: "VanillaExtractRegular.ttf"
                    font_size: 58
                    pos_hint: {'center_x':0.5, 'center_y':0.65}
                    halign: 'center'
                Button:
                    id: sad
                    background_normal: "sad.png"
                    background_down: "sad.png"
                    size_hint: 0.28,0.15
                    pos_hint: {'center_x':0.325,'center_y':0.5}
                    on_press: root.changesize('sad')
                    on_release:
                        root.output1()
                        root.manager.transition.direction = "left"
                        root.manager.current = 'word'
                Button:
                    id: angry
                    background_normal: "angry.png"
                    background_down: "angry.png"
                    size_hint: 0.28,0.15
                    pos_hint: {'center_x':0.675,'center_y':0.5}
                    on_press: root.changesize('angry')
                    on_release:
                        root.output2()
                        root.manager.transition.direction = "left"
                        root.manager.current = 'word'
                Button:
                    id: sick
                    background_normal: "sick.png"
                    background_down: "sick.png"
                    size_hint: 0.28,0.15
                    pos_hint: {'center_x':0.325,'center_y':0.3}
                    on_press: root.changesize('sick')
                    on_release:
                        root.output3()
                        root.manager.transition.direction = "left"
                        root.manager.current = 'word'
                Button:
                    id: heart
                    background_normal: "heart.png"
                    background_down: "heart.png"
                    size_hint: 0.28,0.15
                    pos_hint: {'center_x':0.675,'center_y':0.3}
                    on_press: root.changesize('heart')
                    on_release:
                        root.output4()
                        root.manager.transition.direction = "left"
                        root.manager.current = 'word'
                MDLabel:
                    text: 'Wordiary'
                    theme_text_color: "Hint"
                    pos_hint: {'center_x':0.5, 'center_y':0.1}
                    font_size: 45
                    halign: "center"

        MDNavigationDrawer:
            id: nav_drawer
            ContentNavigationDrawer:
                sm: root.manager
                nav_drawer: nav_drawer
                orientation: 'vertical'
                padding: "8dp"
                spacing: "8dp"

<WordScreen>:
    name: 'word'
    wordtext: wordtext
    MDLabel:
        id: wordtext
        text: ''
        font_size: 50
        italic: True
        halign: 'center'
        theme_text_color: "Primary"
    MDRectangleFlatButton:
        text: 'Write your day'
        pos_hint: {'center_x':0.5,'center_y':0.3}
        on_release:
            root.manager.transition.direction = "up"
            root.manager.current = root.writebtn()
    MDRectangleFlatButton:
        text: 'Song References'
        pos_hint: {'center_x':0.5,'center_y':0.225}
        on_release:
            root.manager.transition.direction = "left"
            root.manager.current = 'reflagu'
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.manager.transition.direction = "right"
            root.manager.current = 'main'
    MDLabel:
        text: 'Wordiary'
        theme_text_color: "Hint"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        font_size: 45
        halign: "center"

<SongReferences>:
    name: 'reflagu'
    textlagu: textlagu
    MDToolbar:
        id: toolbar
        title: 'Song References'
        pos_hint: {"top":1}
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:0
        md_bg_color: (0,0,0,0)
    NavigationLayout:
        x: toolbar.height
        ScreenManager:
            Screen:
                MDLabel:
                    text: "Here's Song Recommendation For You"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_color
                    font_name: "VanillaExtractRegular.ttf"
                    font_size: 45
                    pos_hint: {"center_x":0.5, "center_y":0.6}
                    halign: "center"
                MDLabel:
                    id: textlagu
                    text: ''
                    theme_text_color: 'Primary'
                    pos_hint: {"center_x":0.5, "center_y":0.5}
                    halign: "center"
                    font_name: "VanillaExtractRegular.ttf"
                    font_size: 60
                MDRectangleFlatButton:
                    text: 'Listen'
                    pos_hint: {'center_x':0.5, 'center_y':0.375}
                    on_release: root.song()
                MDLabel:
                    text: 'Wordiary'
                    theme_text_color: "Hint"
                    pos_hint: {'center_x':0.5, 'center_y':0.1}
                    font_size: 45
                    halign: "center"

        MDNavigationDrawer:
            id: nav_drawer
            ContentNavigationDrawer:
                sm: root.manager
                nav_drawer: nav_drawer
                orientation: 'vertical'
                padding: "8dp"
                spacing: "8dp"

<DiaryScreen>:
    name: 'diary'
    diary: diary
    date: date
    title: title
    FloatLayout:
        MDLabel:
            text: "Date "
            font_name: "VanillaExtractRegular.ttf"
            theme_text_color: 'Primary'
            pos_hint: {"center_x":0.25, "center_y":0.9625}
            halign: "center"
        MDLabel:
            text: "Title "
            font_name: "VanillaExtractRegular.ttf"
            theme_text_color: 'Primary'
            pos_hint: {"center_x":0.25, "center_y":0.9025}
            halign: "center"
        TextInput:
            id: date
            font_name: "VanillaExtractRegular.ttf"
            multiline: False
            hint_text: 'DD-MM-YYYY'
            size_hint: 0.65, 0.05
            pos_hint: {"center_x":0.65, "center_y":0.965}
            padding_y : [(self.height/2.0)-(self.line_height/2.0)*len(self._lines), 0]
        MDIconButton:
            icon: "calendar"
            theme_text_color: "Custom"
            text_color: (33/255, 150/255, 243/255, 255/255)
            ripple_scale: .5
            pos_hint: {'center_x': 0.91, 'center_y': 0.965}
            on_release:
                root.opencalendar()
        TextInput:
            id: title
            font_name: "VanillaExtractRegular.ttf"
            multiline: False
            size_hint: 0.65, 0.05
            pos_hint: {"center_x":0.65, "center_y":0.905}
            padding_y : [(self.height/2.0)-(self.line_height/2.0)*len(self._lines), 0]
        ScrollView:
            id: scroller
            size_hint: 0.95, 0.855
            pos_hint: {"center_x":0.5, "center_y":0.4425}
            TextInput:
                id: diary
                font_name: "VanillaExtractRegular.ttf"
                multiline: True
                size_hint: 1, None
                height: max((len(self._lines)+1) * self.line_height, scroller.height)
        MDFillRoundFlatIconButton:
            icon: "plus-circle"
            text: 'Save'
            pos_hint: {'center_x':0.5, 'y':0.05}
            on_release:
                root.save()
    MDIconButton:
        icon: "home-outline"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.clear()
            root.manager.transition.direction = "right"
            root.manager.current = 'main'

<ContentNavigationDrawer>:
    AnchorLayout:
        anchor_x: "center"
        size_hint_y: None
        height: avatar.height
        Image:
            id: avatar
            size_hint: None, None
            size: "150dp", "150dp"
            source: "brand.png"
    ScrollView:
        MDList:
            OneLineIconListItem:
                text: "Home"
                on_release:
                    root.nav_drawer.set_state("close")
                    root.sm.transition.direction = "left"
                    root.sm.current = 'main'
                IconLeftWidget:
                    icon: "home"
            OneLineIconListItem:
                text: "Diary"
                on_release:
                    root.nav_drawer.set_state("close")
                    root.sm.transition.direction = "left"
                    root.sm.current = root.diary()
                IconLeftWidget:
                    icon: "book"
            OneLineIconListItem:
                text: "History"
                on_release:
                    root.nav_drawer.set_state("close")
                    root.sm.transition.direction = "left"
                    root.sm.current = root.history()
                IconLeftWidget:
                    icon: "timelapse"
            OneLineIconListItem:
                text: "Settings"
                on_release:
                    root.nav_drawer.set_state("close")
                    root.sm.transition.direction = "left"
                    root.sm.current = 'settings'
                IconLeftWidget:
                    icon: "settings"
            OneLineIconListItem:
                text: "About Us"
                on_release:
                    root.nav_drawer.set_state("close")
                    root.aboutus()
                IconLeftWidget:
                    icon: "information-outline"

<HistoryScreen>:
    name: 'history'
    searchdate: searchdate
    MDToolbar:
        id: toolbar
        title: 'History'
        pos_hint: {"top":1}
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:0
        md_bg_color: (0,0,0,0)
    NavigationLayout:
        x: toolbar.height
        ScreenManager:
            id: sm
            Screen:
                MDLabel:
                    text: 'Cari diary-mu berdasarkan tanggal'
                    theme_text_color: "Primary"
                    font_name: "VanillaExtractRegular.ttf"
                    font_size: 50
                    pos_hint: {'center_x':0.5, 'center_y':0.6}
                    halign: 'center'
                MDTextField:
                    id: searchdate
                    hint_text: "Masukkan tanggal disini"
                    helper_text: "Gunakan format dd-mm-yyyy"
                    helper_text_mode: "on_focus"
                    font_size: "20sp"
                    pos_hint:{'center_x': 0.5, 'center_y': 0.5}
                    size_hint_x:None
                    width:700
                    halign: 'center'
                    line_color_normal: 1,1,1,1
                MDIconButton:
                    icon: "calendar"
                    ripple_scale: .5
                    pos_hint: {'center_x': 0.8, 'center_y': 0.5}
                    on_release:
                        root.opencalendar()
                MDFlatButton:
                    text: 'SEARCH'
                    pos_hint: {'center_x':0.8, 'y':0.4}
                    on_release:
                        root.search()
                        root.manager.transition.direction = "left"
                        root.manager.current = root.datechecking()
                MDLabel:
                    text: 'Wordiary'
                    theme_text_color: "Hint"
                    pos_hint: {'center_x':0.5, 'center_y':0.1}
                    font_size: 45
                    halign: "center"

        MDNavigationDrawer:
            id: nav_drawer
            ContentNavigationDrawer:
                sm: root.manager
                nav_drawer: nav_drawer
                orientation: 'vertical'
                padding: "8dp"
                spacing: "8dp"

<ResultScreen>:
    name: 'resultscreen'
    diarytext: diarytext
    title: title
    BoxLayout:
        orientation: "vertical"
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"center_x":0.075, "y":0.925}
            on_release:
                root.clear()
                root.manager.transition.direction = "right"
                root.manager.current = 'history'
        MDLabel:
            id: title
            text: ''
            font_name: "VanillaExtractRegular.ttf"
            font_size: 60
            size_hint_y: 0.1
            theme_text_color: "Primary"
            halign: "left"
            valign: "top"
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            MDLabel:
                id: diarytext
                text: ''
                font_name: "VanillaExtractRegular.ttf"
                font_size: 40
                theme_text_color: "Primary"
                pos_hint: {"center_x":0.5}
                size_hint_y: None
                size: self.texture_size
                halign: "left"
                valign: "top"
        MDFloatingActionButton:
            icon: "pencil"
            md_bg_color: app.theme_cls.primary_color
            pos_hint: {"center_x":0.85, "center_y":0.075}
            on_release:
                root.edit()
                root.manager.transition.direction = "up"
                root.manager.current = 'diary'

<SettingScreen>:
    name: 'settings'
    MDToolbar:
        id: toolbar
        title: 'Settings'
        pos_hint: {"top":1}
        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
        elevation:0
        md_bg_color: (0,0,0,0)
    NavigationLayout:
        x: toolbar.height
        ScreenManager:
            Screen:
                name: 'settingutama'
                MDList:
                    pos_hint: {"top": 0.9}
                    OneLineListItem:
                        text: "Buat PIN"
                        on_release:
                            root.manager.transition.direction = "left"
                            root.manager.current = root.buatpin()
                    OneLineListItem:
                        text: "Ganti PIN"
                        on_release:
                            root.manager.transition.direction = "left"
                            root.manager.current = root.gantipin()
                    OneLineListItem:
                        text: "Hapus PIN"
                        on_release:
                            root.manager.transition.direction = "left"
                            root.manager.current = root.hapuspin()
                    OneLineListItem:
                        text: 'Lupa PIN'
                        on_release:
                            root.manager.transition.direction = "left"
                            root.manager.current = root.lupapin()
                MDLabel:
                    text: 'Wordiary'
                    theme_text_color: "Hint"
                    pos_hint: {'center_x':0.5, 'center_y':0.1}
                    font_size: 45
                    halign: "center"

        MDNavigationDrawer:
            id: nav_drawer
            ContentNavigationDrawer:
                sm: root.manager
                nav_drawer: nav_drawer
                orientation: 'vertical'
                padding: "8dp"
                spacing: "8dp"

<BuatPINScreen>:
    name: 'buatpin'
    newpin: newpin
    confirmpin: confirmpin
    pertanyaan: pertanyaan
    jawaban: jawaban
    aturulang: aturulang
    MDTextField:
        id: newpin
        hint_text: "Masukkan PIN"
        helper_text: "masukkan minimal 4 digit angka"
        helper_text_mode: "on_focus"
        font_size: "20sp"
        password: True
        password_mask: "•"
        pos_hint: {'center_x': 0.5, 'center_y': 0.75}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {'center_x': 0.8, 'center_y': 0.75}
        #pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            newpin.password = False if newpin.password is True else True
    MDTextField:
        id: confirmpin
        hint_text: "Konfirmasi PIN"
        helper_text: "harap konfirmasi pin anda"
        helper_text_mode: "on_focus"
        font_size: "20sp"
        password: True
        password_mask: "•"
        pos_hint: {'center_x': 0.5, 'center_y': 0.65}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {'center_x': 0.8, 'center_y': 0.65}
        #pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            confirmpin.password = False if confirmpin.password is True else True
    MDTextField:
        id: pertanyaan
        text: ''
        hint_text: "Buat pertanyaan untuk lupa PIN"
        helper_text: "contoh : Berapakah jumlah mantan saya?"
        helper_text_mode: "on_focus"
        font_size: "20sp"
        pos_hint: {'center_x': 0.5, 'center_y': 0.55}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDTextField:
        id: jawaban
        text: ''
        hint_text: "Buat jawaban dari pertanyaan diatas"
        helper_text: "diperlukan untuk lupa PIN"
        helper_text_mode: "on_focus"
        font_size: "20sp"
        pos_hint: {'center_x': 0.5, 'center_y': 0.45}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDFlatButton:
        text: 'SIMPAN'
        pos_hint: {"center_x":0.8, "y":0.35}
        on_release:
            root.manager.transition.direction = 'right'
            root.manager.current = root.savepin()
            root.clear()
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.clear()
            root.clearpertanyaan()
            root.manager.transition.direction = "right"
            root.manager.current = 'settings'
    MDLabel:
        id: aturulang
        text: ''
        theme_text_color: 'Primary'
        font_size: 60
        pos_hint: {'center_y':0.875}
        halign: "center"
    MDLabel:
        text: 'Wordiary'
        theme_text_color: "Hint"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        font_size: 45
        halign: "center"

<GantiPINScreen>:
    name: 'gantipin'
    pin: pin
    MDTextField:
        id: pin
        hint_text: "Masukkan PIN Anda"
        font_size: "20sp"
        password: True
        password_mask: "•"
        pos_hint:{'center_x': 0.5, 'center_y': 0.5}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {'center_x': 0.8, 'center_y': 0.5}
        #pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            pin.password = False if pin.password is True else True
    MDFlatButton:
        text: 'GANTI PIN'
        pos_hint: {'center_x':0.8, 'y':0.4}
        on_release:
            root.manager.current = root.ganti()
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.clear()
            root.manager.transition.direction = "right"
            root.manager.current = 'settings'
    MDLabel:
        text: 'Wordiary'
        theme_text_color: "Hint"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        font_size: 45
        halign: "center"

<HapusPINScreen>:
    name: 'hapuspin'
    pin: pin
    MDTextField:
        id: pin
        hint_text: "Masukkan PIN Anda"
        font_size: "20sp"
        password: True
        password_mask: "•"
        pos_hint:{'center_x': 0.5, 'center_y': 0.5}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {'center_x': 0.8, 'center_y': 0.5}
        #pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            pin.password = False if pin.password is True else True
    MDFlatButton:
        text: 'OKE'
        pos_hint: {'center_x':0.8, 'y':0.4}
        on_release:
            root.manager.transition.direction = "right"
            root.manager.current = root.hapus()
            root.clear()
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.clear()
            root.manager.transition.direction = "right"
            root.manager.current = 'settings'
    MDLabel:
        text: 'Wordiary'
        theme_text_color: "Hint"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        font_size: 45
        halign: "center"

<VerifyDiary>:
    name: 'verifydiary'
    pin: pin
    MDTextField:
        id: pin
        hint_text: "Masukkan PIN Anda"
        helper_text: "Lupa pin? Pulihkan pin Anda di Settings"
        helper_text_mode: "on_focus"
        font_size: "20sp"
        password: True
        password_mask: "•"
        pos_hint:{'center_x': 0.5, 'center_y': 0.5}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {'center_x': 0.8, 'center_y': 0.5}
        #pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            pin.password = False if pin.password is True else True
    MDFlatButton:
        text: 'OKE'
        pos_hint: {'center_x':0.8, 'y':0.4}
        on_release:
            root.manager.current = root.submit()
            root.clear()
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.clear()
            root.manager.transition.direction = "right"
            root.manager.current = 'main'
    MDLabel:
        text: 'Wordiary'
        theme_text_color: "Hint"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        font_size: 45
        halign: "center"

<VerifyHistory>:
    name: 'verifyhistory'
    pin: pin
    MDTextField:
        id: pin
        hint_text: "Masukkan PIN Anda"
        helper_text: "Lupa pin? Pulihkan pin Anda di Settings"
        helper_text_mode: "on_focus"
        font_size: "20sp"
        password: True
        password_mask: "•"
        pos_hint:{'center_x': 0.5, 'center_y': 0.5}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDIconButton:
        icon: "eye-off"
        ripple_scale: .5
        pos_hint: {'center_x': 0.8, 'center_y': 0.5}
        #pos: text_field.width - self.width + dp(8), 0
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            pin.password = False if pin.password is True else True
    MDFlatButton:
        text: 'OKE'
        pos_hint: {'center_x':0.8, 'y':0.4}
        on_release:
            root.manager.current = root.submit()
            root.clear()
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.clear()
            root.manager.transition.direction = "right"
            root.manager.current = 'main'
    MDLabel:
        text: 'Wordiary'
        theme_text_color: "Hint"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        font_size: 45
        halign: "center"

<LupaPin>:
    name: 'lupapin'
    jawaban: jawaban
    pertanyaan: pertanyaan
    MDLabel:
        id: pertanyaan
        text: ''
        theme_text_color: 'Primary'
        font_size: 60
        pos_hint: {'center_x':0.5, 'center_y':0.65}
        halign: 'center'
    MDTextField:
        id: jawaban
        hint_text: "Masukkan Jawaban Anda"
        helper_text: "masukkan jawaban untuk atur ulang PIN"
        helper_text_mode: "on_focus"
        font_size: "20sp"
        pos_hint:{'center_x': 0.5, 'center_y': 0.5}
        size_hint_x:None
        width:700
        halign: 'center'
        line_color_normal: 1,1,1,1
    MDFlatButton:
        text: 'OKE'
        pos_hint: {'center_x':0.8, 'y':0.4}
        on_release:
            root.manager.current = root.lupapin()
            root.clear()
    MDIconButton:
        icon: "arrow-left"
        pos_hint: {"center_x":0.075, "y":0.925}
        on_release:
            root.clear()
            root.manager.transition.direction = "right"
            root.manager.current = 'settings'
    MDLabel:
        text: 'Wordiary'
        theme_text_color: "Hint"
        pos_hint: {'center_x':0.5, 'center_y':0.1}
        font_size: 45
        halign: "center"
